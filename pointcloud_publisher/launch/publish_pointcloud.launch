<launch>
    <arg name="resolution" default="0.05"/>
    <arg name="depth_levels" default="16"/>
    <arg name="num_workers" default="3"/>
    <arg name="color" default="true"/>
    <arg name="model" default="studio_d435i_t265_3.ply"/>
    
    <node pkg="ufomap_mapping" type="ufomap_mapping_server_node" name="ufomap_mapping_server_node" output="log"
          required="true">
        <remap from="cloud_in" to="/camera/depth/points"/>

        <param name="num_workers" value="$(arg num_workers)"/>

        <param name="resolution" value="$(arg resolution)"/>
        <param name="depth_levels" value="$(arg depth_levels)"/>
        <param name="color_map" value="$(arg color)"/>
    </node>
    <node pkg="pointcloud_publisher" type="cloud_publisher" name="cloud_publisher" output="screen">
        <param name="path"  value="/home/alsarmi/udacity_ws/src/3D-MAV-Path-Planner/pointcloud_publisher/models/$(arg model)"/>
        <param name="topic" value="/camera/depth/points"/>
        <param name="frame_id" value="t265_d400_base"/>
        <param name="publish_rate" value="1.0"/>
    </node>
    <node pkg="tf" type="static_transform_publisher" name="world_to_pointcloud"
          args="1.061 1.364 1.338 -1.571 -0.031 0.017 map t265_d400_base 100"/>
    <node type="rviz" name="rviz" pkg="rviz" args="-d $(find pointcloud_publisher)/rviz/pointcloud_publisher_rviz.rviz" />

</launch>
